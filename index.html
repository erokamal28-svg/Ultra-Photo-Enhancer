<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI 4K Master Enhancer | Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        
        body { 
            background-color: #0d1224; 
            color: #ffffff; 
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }

        .glass-container { 
            background: #161d31; 
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 24px;
        }

        .action-button {
            background: linear-gradient(135deg, #2563eb 0%, #4f46e5 100%);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.2);
            transition: all 0.2s ease;
        }

        .action-button:active { transform: scale(0.96); }

        .image-frame {
            border-radius: 18px;
            overflow: hidden;
            background: #000000;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .label-text {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #64748b;
            margin-left: 8px;
            margin-bottom: 8px;
            display: block;
        }

        /* Scanning Animation */
        .scanner {
            width: 100%;
            height: 3px;
            background: #3b82f6;
            position: absolute;
            z-index: 20;
            box-shadow: 0 0 15px #3b82f6;
            animation: scan 2s infinite linear;
        }

        @keyframes scan {
            0% { top: 0%; opacity: 0; }
            50% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }
    </style>
</head>
<body class="p-5 pb-24">

    <div class="flex justify-center mb-6">
        <script type="text/javascript">
            atOptions = { 'key' : '337fe21f32767a6ab06c6205ccf37779', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
        </script>
        <script type="text/javascript" src="https://sponsorinserttimeout.com/337fe21f32767a6ab06c6205ccf37779/invoke.js"></script>
    </div>

    <div class="max-w-xl mx-auto space-y-8">
        
        <header>
            <h1 class="text-xl font-bold tracking-tight">AI 4K Master Enhancer | Pro</h1>
            <p class="text-xs text-gray-500">Preview</p>
        </header>

        <div class="glass-container p-6 space-y-6">
            <div id="drop-zone" class="border-2 border-dashed border-blue-500/20 rounded-2xl py-14 text-center cursor-pointer active:bg-blue-500/5 transition">
                <input type="file" id="fileInput" class="hidden" accept="image/*">
                <i class="fa-regular fa-images text-4xl text-blue-500 mb-4"></i>
                <h2 class="text-lg font-bold italic">Drop or Select Media</h2>
                <p class="text-[10px] text-gray-500 mt-1">High-Fidelity AI Reconstruction (Max 50MB)</p>
            </div>

            <button id="enhanceBtn" onclick="processFile()" class="action-button w-full py-5 rounded-2xl font-extrabold text-base tracking-wider uppercase">
                Start 4K Enhancement
            </button>
        </div>

        <div id="originalSection" class="hidden">
            <span class="label-text">Original</span>
            <div id="originalPreview" class="image-frame">
                </div>
        </div>

        <div id="resultArea" class="hidden space-y-5">
            <span class="label-text text-cyan-500">Enhanced (AI 4K)</span>
            
            <div class="relative image-frame min-h-[220px]">
                <div id="scanLine" class="scanner hidden"></div>
                
                <div id="loader" class="absolute inset-0 bg-slate-900/90 z-30 hidden flex flex-col items-center justify-center">
                    <div class="w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-3"></div>
                    <p class="text-[10px] font-bold text-blue-400 tracking-widest uppercase">Synthesizing Details...</p>
                </div>

                <div id="enhancedPreview" class="flex items-center justify-center">
                    </div>
            </div>

            <a id="dlLink" href="#" download class="hidden w-full bg-white text-black text-center py-4 rounded-2xl font-black text-xs tracking-widest uppercase">
                <i class="fa-solid fa-download mr-2"></i> Save to Gallery
            </a>
        </div>

    </div>

    <div class="fixed bottom-0 left-0 w-full flex justify-center bg-black/80 py-3 backdrop-blur-lg border-t border-white/5 z-50">
        <script type="text/javascript">
            atOptions = { 'key' : 'b41d293f4308944b4df1b3fc987c8afa', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
        </script>
        <script type="text/javascript" src="https://sponsorinserttimeout.com/b41d293f4308944b4df1b3fc987c8afa/invoke.js"></script>
    </div>

    <script>
        // BACKEND URL
        const SERVER_URL = "https://erobhai-ultraimageenhancer.hf.space/enhance";
        const fileInput = document.getElementById('fileInput');
        
        document.getElementById('drop-zone').onclick = () => fileInput.click();

        fileInput.onchange = (e) => {
            const file = e.target.files[0];
            if(!file) return;

            const url = URL.createObjectURL(file);
            document.getElementById('originalSection').classList.remove('hidden');
            document.getElementById('originalPreview').innerHTML = `<img src="${url}" class="w-full h-auto">`;
            
            // Clear result area
            document.getElementById('resultArea').classList.add('hidden');
        };

        async function processFile() {
            const file = fileInput.files[0];
            if(!file) return alert("Select a photo first!");

            const btn = document.getElementById('enhanceBtn');
            const resultArea = document.getElementById('resultArea');
            const loader = document.getElementById('loader');
            const scanLine = document.getElementById('scanLine');
            const dlLink = document.getElementById('dlLink');
            const enhancedContainer = document.getElementById('enhancedPreview');
            
            // UI Update
            resultArea.classList.remove('hidden');
            loader.classList.remove('hidden');
            scanLine.classList.remove('hidden');
            btn.disabled = true;
            btn.innerText = "Processing AI...";
            dlLink.classList.add('hidden');

            // Scroll to Enhanced Section
            window.scrollTo({ top: resultArea.offsetTop - 30, behavior: 'smooth' });

            const formData = new FormData();
            formData.append('file', file);

            try {
                const response = await fetch(SERVER_URL, { method: 'POST', body: formData });
                if (!response.ok) throw new Error("Offline");

                const blob = await response.blob();
                const resultUrl = URL.createObjectURL(blob);

                enhancedContainer.innerHTML = `<img src="${resultUrl}" class="w-full h-auto">`;
                dlLink.href = resultUrl;
                dlLink.classList.remove('hidden');
            } catch (err) {
                alert("Connection Error. Ensure your AI backend is running.");
            } finally {
                loader.classList.add('hidden');
                scanLine.classList.add('hidden');
                btn.disabled = false;
                btn.innerText = "Start 4K Enhancement";
            }
        }
    </script>
</body>
</html>
